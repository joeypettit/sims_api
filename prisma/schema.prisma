generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id        String    @id @default(uuid())
  firstName String
  lastName  String
  projects  Project[]
}

model Client {
  id        String    @id @default(uuid())
  firstName String
  lastName  String
  projects  Project[]
}

// model PhoneNumber {
//   id          String @id @default(uuid())
//   countryCode String
//   areaCode    String
//   number      String
//   extension   String
//   type        String
//   clientId    String
//   client      Client @relation(fields: [clientId], references: [id])
// }

model Project {
  id          String        @id @default(uuid())
  name        String
  description String
  clients     Client[]
  users       User[]
  areas       ProjectArea[]
}

model ProjectArea {
  id        String     @id @default(uuid())
  name      String
  projectId String
  project   Project    @relation(fields: [projectId], references: [id])
  lineItems LineItem[]
}

model LineItem {
  id              String           @id @default(uuid())
  name            String
  quantity        Float
  unitId          String
  unit            LineItemUnit     @relation(fields: [unitId], references: [id])
  projectAreaId   String
  projectArea     ProjectArea      @relation(fields: [projectAreaId], references: [id])
  lineItemOptions LineItemOption[]
  lineItemGroupId String
  lineItemGroup   LineItemGroup    @relation(fields: [lineItemGroupId], references: [id])
  marginPercent   Float
}

model LineItemUnit {
  id        String     @id @default(uuid())
  name      String
  lineItems LineItem[]
}

model LineItemOption {
  id                        String      @id @default(uuid())
  lowCostInDollars          Float?
  highCostInDollars         Float?
  exactCostInDollars        Float?
  priceAdjustmentPercentage Float
  description               String
  productTierId             String
  productTier               ProductTier @relation(fields: [productTierId], references: [id])
  isSelected                Boolean
  lineItemId                String
  lineItem                  LineItem    @relation(fields: [lineItemId], references: [id])
}

model LineItemGroup {
  id              String        @id @default(uuid())
  name            String
  groupCategoryId String
  groupCategory   GroupCategory @relation(fields: [groupCategoryId], references: [id])
  LineItem        LineItem[]
}

model GroupCategory {
  id            String          @id @default(uuid())
  name          String
  LineItemGroup LineItemGroup[]
}

model ProductTier {
  id             String           @id @default(uuid())
  tierLevel      Int
  label          String
  lineItemOption LineItemOption[]
}
